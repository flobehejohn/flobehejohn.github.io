<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>SMART CITY+ – Design sonore & application | Florian Behejohn</title>

    <!-- SEO & Meta -->
    <meta name="description" content="SMART CITY+ : design sonore, application multimédia et prototypes interactifs. Vidéos de démonstration, publication et livrables clés.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Politique audio : cette page force la pause du lecteur global -->
    <meta name="audio-policy" content="pause" />
    <link rel="canonical" href="https://flobehejohn.github.io/assets/portfolio/projet_smart_city/smart_city.html">
    <link rel="icon" href="/assets/images/favicon.ico">

    <!-- CSS vendor -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,300italic,400italic,600italic&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <!-- CSS site (root-relatifs) -->
    <link rel="stylesheet" href="/assets/css/theme.min.css">
    <link rel="stylesheet" href="/assets/css/swatch.bundle.css">
    <link rel="stylesheet" href="/assets/css/carte_magique.css">
    <link rel="stylesheet" href="/assets/fonts/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/fixes.css">

    <!-- Perf R2 dev -->
    <link rel="preconnect" href="https://pub-525a19d7515c4507b60232d7af96dd8f.r2.dev" crossorigin>

    <!-- Styles locaux SCOPÉS à la page (rechargés par le routeur PJAX) -->
    <style data-page-css>
      /* (conserve ton CSS scoped — inchangé) */
      /* Carte vidéo */
      [data-page="smart_city"] .carte-lecteur-video { display: grid; grid-template-columns: 1fr; gap: 1rem; border-radius: 16px; overflow: hidden; background: #fff; }
      [data-page="smart_city"] .carte-lecteur-video-media video { width: 100%; height: auto; display: block; }
      [data-page="smart_city"] .carte-lecteur-video-body { padding: 1rem 1.25rem 1.25rem; }
      [data-page="smart_city"] .carte-lecteur-video-titre { margin: 0 0 .25rem 0; }
      [data-page="smart_city"] .carte-lecteur-video-desc { margin: 0; color: #555; }

      /* Sections */
      [data-page="smart_city"] .phase-header { font-weight: 700; margin: 2.5rem 0 1rem; text-align: center; }
      [data-page="smart_city"] .galerie-simple { display: grid; gap: .75rem; }
      [data-page="smart_city"] .galerie-1 { grid-template-columns: 1fr; }
      [data-page="smart_city"] .galerie-simple img { width: 100%; height: auto; display: block; border-radius: 12px; }

      /* Résumés clés */
      [data-page="smart_city"] .key-cards { display: grid; gap: 1rem; grid-template-columns: 1fr; }
      @media (min-width: 768px){ [data-page="smart_city"] .key-cards { grid-template-columns: repeat(3,1fr);} }
      [data-page="smart_city"] .key-card { border-radius: 16px; background: #fff; padding: 1rem 1.25rem; box-shadow: 0 6px 24px rgba(0,0,0,.06); }
      [data-page="smart_city"] .key-card h3 { font-size: 1.05rem; margin-bottom: .5rem; }
      [data-page="smart_city"] .key-card p { margin: 0; color: #555; }

      /* Modale PDF (z-index fort pour passer au-dessus de tout) */
      [data-page="smart_city"] .modal-overlay {
        position: fixed; inset: 0;
        background: rgba(0,0,0,.6);
        display: none; align-items: center; justify-content: center;
        z-index: 12000;
      }
      [data-page="smart_city"] .modal-overlay.show { display: flex; }
      [data-page="smart_city"] .modal-content-shell { background: #fff; width: min(960px, 92vw); max-height: 90vh; border-radius: 14px; box-shadow: 0 20px 60px rgba(0,0,0,.3); overflow: hidden; display: grid; grid-template-rows: auto 1fr auto; }
      [data-page="smart_city"] .modal-header { display: flex; align-items: center; justify-content: space-between; padding: .75rem 1rem; border-bottom: 1px solid rgba(0,0,0,.08); }
      [data-page="smart_city"] .modal-title { margin: 0; font-size: 1.1rem; }
      [data-page="smart_city"] .close-btn { cursor: pointer; font-size: 1.5rem; line-height: 1; border: 0; background: transparent; }
      [data-page="smart_city"] .modal-body { padding: 0; }
      [data-page="smart_city"] .modal-footer { padding: .75rem 1rem; border-top: 1px solid rgba(0,0,0,.08); display: flex; gap: .5rem; justify-content: center; }
      [data-page="smart_city"] .pdf-viewer { width: 100%; height: 70vh; border: 0; display: block; }

      /* Centrages CTA & footer — scoping strict */
      [data-page="smart_city"] .hero-section,
      [data-page="smart_city"] .hero-section *:not(.btn) { text-align: center !important; }
      [data-page="smart_city"] .hero-section .btn,
      [data-page="smart_city"] .hero-section .btn-lg,
      [data-page="smart_city"] .hero-section .btn-action {
        display: inline-flex !important;
        margin-left: auto !important;
        margin-right: auto !important;
        justify-content: center;
        align-items: center;
      }
      [data-page="smart_city"] section.hero-section .container,
      [data-page="smart_city"] section.section.swatch-custom.section-text-shadow .container { text-align: center !important; }
      [data-page="smart_city"] #footer .container { display: flex; justify-content: center; align-items: center; text-align: center; }
      [data-page="smart_city"] #footer p { margin: 0 auto; text-align: center !important; }

      /* Anti-occlusion : le fond ne capte pas les clics sur cette page */
      [data-page="smart_city"] #cloud-bg { pointer-events: none !important; z-index: 0 !important; }
    </style>
  </head>

  <body class="normal-header preload">
    <!-- Nuage de points / fond -->
    <div id="cloud-bg"></div>

    <!-- NAVBAR -->
    <nav id="masthead" class="navbar navbar-expand-lg navbar-sticky swatch-custom" role="navigation" aria-label="Navigation principale">
      <div class="container d-flex justify-content-between align-items-center">
        <a href="/index.html" class="navbar-brand d-flex align-items-center">
          <img src="/assets/images/log_zim.webp" alt="Logo" class="brand-logo" />
          <span class="site-title">FLORIAN-BEHEJOHN</span>
        </a>

        <button
          class="navbar-toggler collapsed"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#main-navbar"
          aria-controls="main-navbar"
          aria-expanded="false"
          aria-label="Menu">
          <span class="navbar-toggler-icon">
            <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
          </span>
        </button>

        <div class="collapse navbar-collapse" id="main-navbar">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="/index.html" data-no-pjax>Accueil</a></li>
            <li class="nav-item"><a class="nav-link" href="/portfolio_florian_b.html" data-no-pjax>Portfolio</a></li>
            <li class="nav-item"><a class="nav-link" href="/parcours.html" data-no-pjax>Parcours</a></li>
            <li class="nav-item"><a class="nav-link" href="/contact.html" data-no-pjax>Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- CONTENU -->
    <main id="app" data-pjax-root data-page="smart_city" data-audio="local">
      <div id="content">
        <article>
          <!-- HERO -->
          <section class="section swatch-custom pb-0">
            <div class="container">
              <header class="hero-section animated-text pt-4 text-center">
                <h1 class="hyper hairline bordered bordered-normal">SMART CITY+</h1>
                <p class="lead">Plateforme multicanal de services d'hyperproximité : design sonore, interactions et guidage.</p>
              </header>
            </div>
          </section>

          <div class="section-space"></div>

          <!-- Carte vidéo principale -->
          <div class="container">
            <div class="carte-lecteur-video shadow">
              <div class="carte-lecteur-video-media">
                <video
                  controls
                  preload="metadata"
                  poster="/assets/portfolio/projet_smart_city/smart_city_plus_800_600.jpg"
                  width="100%" style="max-width:960px"
                  playsinline>
                  <source src="https://pub-525a19d7515c4507b60232d7af96dd8f.r2.dev/projet_smart_city/smart_city_.mp4" type="video/mp4">
                  Votre navigateur ne supporte pas la vidéo HTML5.
                </video>
              </div>
              <div class="carte-lecteur-video-body">
                <h3 class="carte-lecteur-video-titre">Démonstration – Vue d’ensemble</h3>
                <p class="carte-lecteur-video-desc">Contexte, objectifs et premiers prototypes audiovisuels.</p>
                <div class="mt-3 d-flex flex-wrap gap-3 justify-content-center">
                  <button id="open-publication-modal" class="btn btn-outline-secondary btn-sm" type="button">
                    <i class="fas fa-eye me-2"></i>Voir la publication
                  </button>
                  <a class="btn btn-primary btn-sm" href="/assets/portfolio/projet_smart_city/publication-finale2.pdf" download="publication-finale2.pdf" rel="noopener">
                    <i class="fas fa-file-download me-2"></i>Télécharger la publication
                  </a>
                  <a
                    class="btn btn-outline-primary btn-sm"
                    href="https://soundcloud.com/florian-behejohn-sound/sets/exemples-de-notifications-de-lapplication-smart-city"
                    target="_blank"
                    rel="noopener"
                  >
                    <i class="fab fa-soundcloud me-2"></i>Écouter les notifications
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="section-space"></div>

          <!-- Résumés clés -->
          <div class="container">
            <div class="key-cards">
              <div class="key-card">
                <h3><i class="fas fa-bullseye me-2"></i>Objectif</h3>
                <p>Informer & guider en mobilité grâce à une identité et un langage sonores.</p>
              </div>
              <div class="key-card">
                <h3><i class="fas fa-project-diagram me-2"></i>Processus</h3>
                <p>Analyse des usages → Vocabulaire sonore → Modes d’activation intégrés.</p>
              </div>
              <div class="key-card">
                <h3><i class="fas fa-seedling me-2"></i>Livrables</h3>
                <p>Sonothèque, avatars, démonstrateurs vidéo, publication synthèse.</p>
              </div>
            </div>
          </div>

          <div class="section-space"></div>

          <!-- Image / illustration -->
          <div class="container mb-4">
            <header class="animated-text hero-section">
              <h2 class="hyper hairline bordered bordered-normal">Contexte & intentions</h2>
              <div class="section-space"></div>

              <div class="galerie-simple galerie-1">
                <img src="/assets/portfolio/projet_smart_city/smart_city_plus_800_600.jpg" alt="SMART CITY+ – Réinventer le vivre ensemble" />
              </div>

              <div class="section-space"></div>

              <div class="row g-3">
                <div class="col-md-6">
                  <div class="key-card">
                    <h3><i class="fas fa-users me-2"></i>Contexte & Partenaires</h3>
                    <p>Plateforme hyperlocale en 3D temps réel (Cloud), orientée SOLOMO, pour informer, interagir et activer des services de proximité sur mobile. Partenaires : ENSCI, collectivités & acteurs du numérique.</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="key-card">
                    <h3><i class="fas fa-volume-up me-2"></i>Intention & Mise en œuvre</h3>
                    <p>Le son comme canal utile en mobilité — complément du visuel — avec avatars, notifications et modes d’activation. Vocabulaire cohérent + livrables prêts à intégrer.</p>
                  </div>
                </div>
              </div>
            </header>
          </div>

          <!-- Deuxième carte vidéo -->
          <div class="container">
            <header class="phase-header">Extraits d’application</header>
            <div class="carte-lecteur-video shadow">
              <div class="carte-lecteur-video-media">
                <video controls preload="metadata" poster="/assets/portfolio/projet_smart_city/smart_city_plus_800_600.jpg" playsinline>
                  <source src="https://pub-525a19d7515c4507b60232d7af96dd8f.r2.dev/projet_smart_city/smart_city_appli.mp4" type="video/mp4">
                  Votre navigateur ne supporte pas la vidéo HTML5.
                </video>
              </div>
              <div class="carte-lecteur-video-body">
                <h3 class="carte-lecteur-video-titre">Interactions clés</h3>
                <p class="carte-lecteur-video-desc">Sonar, pleine écoute, guidage & préaudition d’itinéraire.</p>
                <div class="mt-3 d-flex flex-wrap gap-3 justify-content-center">
                  <a
                    class="btn btn-outline-primary btn-sm"
                    href="https://soundcloud.com/florian-behejohn-sound/sets/exemples-de-notifications-de-lapplication-smart-city"
                    target="_blank"
                    rel="noopener"
                  >
                    <i class="fab fa-soundcloud me-2"></i>Écouter les notifications
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- CTA -->
          <section class="hero-section text-center animated-text">
            <div class="container">
              <header class="os-animation" data-os-animation="fadeIn">
                <h2 class="bigger hairline bordered">Découvrir d’autres projets</h2>
              </header>
              <div class="section-space-short"></div>
              <div class="text-center">
                <a href="/portfolio_florian_b.html" class="btn btn-primary btn-lg btn-action os-animation animated fadeInRight" data-os-animation="fadeInRight">
                  Explorer le Portfolio
                </a>
              </div>
            </div>
          </section>

          <section class="section swatch-custom section-text-shadow hero-section">
            <div class="container">
              <header class="hero-section animated-text">
                <h2 class="bigger hairline bordered">Envie d’en savoir plus ?</h2>
                <p class="lead">Parlons usages, parcours et intégration sonore.</p>
                <div style="height: 24px;"></div>
                <a href="/contact.html" class="btn btn-primary btn-lg btn-action os-animation animated fadeInRight" data-os-animation="fadeInRight">Contact</a>
              </header>
            </div>
          </section>
        </article>
      </div>

      <!-- ▼▼▼ MODALE PUBLICATION (dans <main>) ▼▼▼ -->
      <div id="publication-modal" class="modal-overlay" aria-hidden="true" aria-modal="true" role="dialog" aria-labelledby="pub-modal-title">
        <div class="modal-content-shell">
          <div class="modal-header">
            <h3 class="modal-title" id="pub-modal-title">Publication – SMART CITY+</h3>
            <button class="close-btn" id="close-publication-modal" aria-label="Fermer la fenêtre">&times;</button>
          </div>
          <div class="modal-body">
            <iframe
              id="publication-viewer"
              class="pdf-viewer"
              src="/assets/portfolio/projet_smart_city/publication-finale2.pdf"
              title="Publication SMART CITY+ (PDF)"></iframe>
          </div>
          <div class="modal-footer">
            <a class="btn btn-outline-secondary" id="open-pdf-in-tab" href="/assets/portfolio/projet_smart_city/publication-finale2.pdf" target="_blank" rel="noopener">Ouvrir dans un onglet</a>
            <a class="btn btn-primary" id="download-pdf" href="/assets/portfolio/projet_smart_city/publication-finale2.pdf" download="publication-finale2.pdf" rel="noopener">
              <i class="fas fa-file-download me-2"></i>Télécharger la publication
            </a>
          </div>
        </div>
      </div>
      <!-- ▲▲▲ FIN MODALE PUBLICATION ▲▲▲ -->
    </main>

    <!-- FOOTER -->
    <footer id="footer" class="swatch-custom">
      <div class="container">
        <p>© 2025 Florian Behejohn - Tous droits réservés.</p>
      </div>
    </footer>

    <!-- JS : ordre sûr (tout en defer) -->
    <!-- 1) Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>

    <!-- 2) jQuery (certaines libs l’attendent en chargement direct) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" defer></script>

    <!-- 3) Polyfills & patches -->
    <script src="/assets/js/jquery-placeholder-polyfill.js" defer></script>
    <script src="/assets/js/smartresize-patch.js" defer></script>

    <!-- 4) Navbar (auto-close + guards + rebind PJAX) -->
    <script src="/assets/js/navbar.js" defer></script>

    <!-- 5) Router PJAX + Lecteur persistant (root-relatifs) -->
    <script src="/assets/js/pjax-router.js" defer></script>
    <script src="/assets/js/page-hub.js" defer></script>
    <script src="/assets/js/player-singleton.js" defer></script>

    <!-- 6) Plugins/libs éventuels s’appuyant sur jQuery -->
    <script src="/assets/js/packages.min.js" defer></script>

    <!-- 7) Script du thème -->
    <script src="/assets/js/theme.min.js" defer></script>

    <!-- 8) Tes scripts applicatifs -->
    <script src="/assets/js/animated-text.js" defer></script>
    <script src="/assets/js/script.js" defer></script>

    <!-- 9) Nuage de points (module ESM) -->
    <script type="module" src="/src/nuage_magique/test.js"></script>

    <!-- Retire le preload une fois le DOM prêt (plein chargement) -->
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        document.body.classList.remove('preload');
      });
    </script>

    <!-- REMPLACEMENT DU FALLBACK PAR LA VERSION ROBUSTE (préférer assets/js/smart_city.js) -->
<script>
  window.addEventListener('DOMContentLoaded', function () {
    // Try canonical path first (the real file location), then alternatives
    const candidates = [
      '/assets/js/smart_city.js',           // <<--- TON FICHIER : priorité 1
      '/assets/js/pages/smart_city.js',     // fallback legacy (si tu veux le garder)
      'assets/js/smart_city.js',
      'assets/js/pages/smart_city.js'
    ];

    (async function loadFirstAvailable() {
      for (const src of candidates) {
        try {
          // HEAD est rapide et suffisant ; certains serveurs ne renvoient pas correctement les headers pour HEAD,
          // on tombe alors sur GET en lecture si nécessaire (fallback).
          let resp = null;
          try {
            resp = await fetch(src, { method: 'HEAD', cache: 'no-store', credentials: 'same-origin' });
          } catch (e) {
            // certains environnements HEAD échouent (CORS, dev servers) -> essayer GET léger
            resp = await fetch(src, { method: 'GET', cache: 'no-store', credentials: 'same-origin' });
          }

          if (!resp) continue;
          if (!resp.ok) continue;

          const ct = resp.headers.get('content-type') || '';
          // s'assurer que le serveur renvoie bien du JS (evite nosniff & JS bloqué)
          if (!/javascript|ecmascript|x-javascript/.test(ct.toLowerCase())) {
            console.warn('[fallback] trouvé mais content-type non JS, ignore :', src, ct);
            continue;
          }

          // OK : on injecte le script avec un cache-buster
          const s = document.createElement('script');
          s.src = src + (src.includes('?') ? '&' : '?') + 'v=' + Date.now();
          s.defer = true;
          s.async = false;
          s.onload = () => console.info('[fallback] script chargé et exécuté :', src);
          s.onerror = (ev) => console.error('[fallback] échec chargement script (injection) :', src, ev);
          document.head.appendChild(s);
          return;
        } catch (e) {
          // ignorer et passer au suivant
        }
      }
      console.warn('[fallback] Aucun script smart_city valable trouvé sur les chemins testés.');
    })();
  });
</script>


    <!-- Téléport modale : au-dessus de tout, puis retour à sa place ; idempotent + PJAX-safe -->
    <script>
      (function () {
        let portaled = false, placeholder = null;
    
        function openModal(modal){
          if (!portaled) {
            placeholder = document.createComment('modal-placeholder');
            if (modal.parentNode) modal.parentNode.insertBefore(placeholder, modal);
            document.body.appendChild(modal); // bring on top
            portaled = true;
          }
          modal.classList.add('show');
          modal.setAttribute('aria-hidden','false');
    
          // use global util if present
          if (window.__utils && typeof window.__utils.lockBodyScroll === 'function') {
            window.__utils.lockBodyScroll();
          } else {
            // legacy fallback
            document.body.dataset._prevOverflow = document.body.style.overflow || '';
            document.body.style.overflow = 'hidden';
          }
        }
    
        function closeModal(modal){
          modal.classList.remove('show');
          modal.setAttribute('aria-hidden','true');
    
          // restore body only if no modal remains visible (small delay to allow stacking updates)
          setTimeout(()=> {
            const anyOpen = Array.from(document.querySelectorAll('.modal-overlay.show, .audio-player-modal.show, [role="dialog"].show'))
              .some(x => x && x.classList && x.classList.contains('show'));
            if (!anyOpen) {
              if (window.__utils && typeof window.__utils.unlockBodyScroll === 'function') {
                window.__utils.unlockBodyScroll();
              } else {
                // legacy fallback restore
                document.body.style.overflow = document.body.dataset._prevOverflow || '';
                delete document.body.dataset._prevOverflow;
              }
            }
          }, 20);
    
          if (portaled && placeholder && placeholder.parentNode) {
            placeholder.parentNode.insertBefore(modal, placeholder);
            portaled = false;
          }
        }
    
        function bindModalOnce() {
          const root  = document.querySelector('main[data-pjax-root][data-page="smart_city"]');
          if (!root) return;
          const modal = root.querySelector('#publication-modal');
          const open  = root.querySelector('#open-publication-modal');
          const close = root.querySelector('#close-publication-modal');
          if (!modal || !open || !close) return;
    
          if (open.dataset.bound === '1') return; // idempotent
          open.dataset.bound = '1';
    
          open.addEventListener('click', (e)=>{ e.preventDefault(); openModal(modal); }, { passive:false });
          close.addEventListener('click', (e)=>{ e.preventDefault(); closeModal(modal); }, { passive:false });
          modal.addEventListener('click', (e)=>{ if (e.target === modal) closeModal(modal); });
          document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape' && modal.classList.contains('show')) closeModal(modal); });
        }
    
        if (document.readyState !== 'loading') bindModalOnce();
        else document.addEventListener('DOMContentLoaded', bindModalOnce);
        document.addEventListener('pjax:ready', bindModalOnce);
      })();
    </script>
    <!-- en bas de body, sur TOUTES les pages PJAX (home, portfolio, etc.) -->
    <script src="/assets/js/pages/dotnet_boot.js" defer></script>
    
  </body>
</html>

